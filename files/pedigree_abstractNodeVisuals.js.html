<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>pedigree&#x2F;abstractNodeVisuals.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/AbstractHoverbox.html">AbstractHoverbox</a></li>
            
                <li><a href="..&#x2F;classes/AbstractNode.html">AbstractNode</a></li>
            
                <li><a href="..&#x2F;classes/AbstractNodeVisuals.html">AbstractNodeVisuals</a></li>
            
                <li><a href="..&#x2F;classes/AbstractPerson.html">AbstractPerson</a></li>
            
                <li><a href="..&#x2F;classes/AbstractPersonVisuals.html">AbstractPersonVisuals</a></li>
            
                <li><a href="..&#x2F;classes/ActionStack.html">ActionStack</a></li>
            
                <li><a href="..&#x2F;classes/Graph.html">Graph</a></li>
            
                <li><a href="..&#x2F;classes/GroupHoverbox.html">GroupHoverbox</a></li>
            
                <li><a href="..&#x2F;classes/Legend.html">Legend</a></li>
            
                <li><a href="..&#x2F;classes/NodeMenu.html">NodeMenu</a></li>
            
                <li><a href="..&#x2F;classes/NodetypeSelectionBubble.html">NodetypeSelectionBubble</a></li>
            
                <li><a href="..&#x2F;classes/Partnership.html">Partnership</a></li>
            
                <li><a href="..&#x2F;classes/PartnershipHoverbox.html">PartnershipHoverbox</a></li>
            
                <li><a href="..&#x2F;classes/PartnershipVisuals.html">PartnershipVisuals</a></li>
            
                <li><a href="..&#x2F;classes/PedigreeEditor.html">PedigreeEditor</a></li>
            
                <li><a href="..&#x2F;classes/Person.html">Person</a></li>
            
                <li><a href="..&#x2F;classes/PersonGroup.html">PersonGroup</a></li>
            
                <li><a href="..&#x2F;classes/PersonGroupVisuals.html">PersonGroupVisuals</a></li>
            
                <li><a href="..&#x2F;classes/PersonHoverbox.html">PersonHoverbox</a></li>
            
                <li><a href="..&#x2F;classes/PersonVisuals.html">PersonVisuals</a></li>
            
                <li><a href="..&#x2F;classes/PlaceHolder.html">PlaceHolder</a></li>
            
                <li><a href="..&#x2F;classes/PlaceHolderVisuals.html">PlaceHolderVisuals</a></li>
            
                <li><a href="..&#x2F;classes/Pregnancy.html">Pregnancy</a></li>
            
                <li><a href="..&#x2F;classes/PregnancyVisuals.html">PregnancyVisuals</a></li>
            
                <li><a href="..&#x2F;classes/SaveLoadEngine.html">SaveLoadEngine</a></li>
            
                <li><a href="..&#x2F;classes/SaveLoadIndicator.html">SaveLoadIndicator</a></li>
            
                <li><a href="..&#x2F;classes/TemplateSelector.html">TemplateSelector</a></li>
            
                <li><a href="..&#x2F;classes/Workspace.html">Workspace</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: pedigree&#x2F;abstractNodeVisuals.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * AbstractNodeVisuals is the general abstract class for the graphic engine used by nodes on the Pedigree graph.
 * Objects of this class have information about the positioning of the graphical elements of the node.
 *
 * @class AbstractNodeVisuals
 * @constructor
 * @param {AbstractNode} node The node for which the graphics are drawn
 * @param {Number} x The x coordinate on the canvas
 * @param {Number} y The y coordinate on the canvas
 *&#x2F;

var AbstractNodeVisuals = Class.create({

    initialize: function(node, x, y) {
        this._node = node;
        this._absoluteX = x;
        this._absoluteY = y;
    },

    &#x2F;**
     * Returns the node for which the graphics are being drawn
     *
     * @method getNode
     * @return {AbstractNode}
     *&#x2F;
    getNode: function() {
        return this._node;
    },

    &#x2F;**
     * Returns the current X coordinate of this node on the canvas, taking into consideration transformation data.
     *
     * @method getX
     * @return {Number} the x coordinate
     *&#x2F;
    getX: function() {
        return this._absoluteX;
    },

    &#x2F;**
     * Changes the X coordinate of the node
     *
     * @method setX
     * @param {Number} x The target x coordinate on the canvas
     * @param {Boolean} [animate] Set to true if you want to animate the transition
     * @param {Function} [callback] The function called at the end of the animation
     *&#x2F;
    setX: function(x, animate, callback) {
        this.setPos(x, this.getY(), animate, callback);
    },

    &#x2F;**
     * Returns the current Y coordinate of this node on the canvas, taking into consideration transformation data.
     *
     * @method getY
     * @return {Number} The y coordinate
     *&#x2F;
    getY: function() {
        return this._absoluteY;
    },

    &#x2F;**
     * Changes the Y coordinate of the node
     *
     * @method setY
     * @param {Number} y The target y coordinate on the canvas
     * @param {Boolean} [animate] Set to true if you want to animate the transition
     * @param {Function} [callback] The function called at the end of the animation
     *&#x2F;
    setY: function(y, animate, callback) {
        this.setPos(this.getX(), y, animate, callback);
    },

    &#x2F;**
     * Returns an array containing the x and y coordinates of the node on canvas.
     *
     * @method getPos
     * @return {Array} in the form [x, y]
     *&#x2F;
    getPos: function() {
        return [this.getX(), this.getY()];
    },

    &#x2F;**
     * Returns true if this node is selected. A selected node is a node with visible Hoverbox.
     *
     * @method isSelected
     * @return {Boolean}
     *&#x2F;
    isSelected: function() {
        return this._isSelected;
    },

    &#x2F;**
     * Sets this node&#x27;s selected property to isSelected. A selected node is a node with visible Hoverbox.
     *
     * @method setSelected
     * @param {Boolean} isSelected True if the node is selected
     *&#x2F;
    setSelected: function(isSelected) {
        this._isSelected = isSelected;
    },

    &#x2F;**
     * Returns a Raphael set of all the graphics and labels associated with this node.
     *
     * @method getAllGraphics
     * @return {Raphael.st}
     *&#x2F;
    getAllGraphics: function() {
        return editor.getPaper().set(this.getShapes());
    },

    &#x2F;**
     * Returns a Raphael set of graphic elements of which the icon of the node consists. Does not
     * include hoverbox elements or labels.
     *
     * @method getShapes
     * @return {Raphael.st}
     *&#x2F;
    getShapes: function() {
        return editor.getPaper().set()
    },

    &#x2F;**
     * Removes all the graphical elements of this node from the canvas
     *
     * @method remove
     *&#x2F;
    remove: function() {
        this.getHoverBox() &amp;&amp; this.getHoverBox().remove();
        this.getAllGraphics().remove();
    },

    &#x2F;**
     * Returns the hoverbox object for this node
     *
     * @method getHoverBox
     * @return {AbstractHoverbox}
     *&#x2F;
    getHoverBox: function() {
        return this._hoverBox;
    }
});

var ChildlessBehaviorVisuals = {

    &#x2F;**
     * Returns the childless status shape for this Person
     *
     * @method getChildlessShape
     * @return {Raphael.el}
     *&#x2F;
    getChildlessShape: function() {
        return this._childlessShape;
    },

    &#x2F;**
     * Updates the childless status icon for this Person based on the childless&#x2F;infertility status.
     *
     * @method updateChildlessShapes
     *&#x2F;
    updateChildlessShapes: function() {
        var status = this.getNode().getChildlessStatus();
        this.getChildlessShape() &amp;&amp; this.getChildlessShape().remove();

        var x = this.getX(),
            y = this.getY(),
            r, lowY;
        if(this.getNode().getType() == &quot;Partnership&quot;) {
            r = PedigreeEditor.attributes.partnershipRadius;
            lowY = 2 * r + y;
        } else {
            r = PedigreeEditor.attributes.radius;
            lowY = 1.6 * r + y;
        }

        var childlessPath = [[&quot;M&quot;, x, y],[&quot;L&quot;, x, lowY],[&quot;M&quot;, x - r, lowY], [&quot;l&quot;, 2 * r, 0]];
        if(status == &#x27;infertile&#x27;) {
            childlessPath.push([&quot;M&quot;, x - r, lowY + 4], [&quot;l&quot;, 2 * r, 0]);
        }

        if(status) {
            this._childlessShape = editor.getPaper().path(childlessPath);
            this._childlessShape.attr({&quot;stroke-width&quot;: 2.5, stroke: &quot;#3C3C3C&quot;});
            this._childlessShape.insertAfter(this.getHoverBox().getBackElements().flatten());
            this.getHoverBox().hideChildHandle();
        }
        else {
            this._childlessShape &amp;&amp; this._childlessShape.remove();
            if(this.getNode().getType() != &quot;Person&quot; || this.getNode().getPartnerships().length == 0)
            this.getHoverBox().unhideChildHandle();
        }
    },

    &#x2F;**
     * Updates the childless status reason label for this Person
     *
     * @method updateChildlessStatusLabel
     *&#x2F;
    updateChildlessStatusLabel: function() {
        this._childlessStatusLabel &amp;&amp; this._childlessStatusLabel.remove();
        var text =  &quot;&quot;;
        this.getNode().getChildlessReason() &amp;&amp; (text += this.getNode().getChildlessReason());
        if(text.strip() != &#x27;&#x27;) {
            this._childlessStatusLabel = editor.getPaper().text(this.getX(), this.getY() + PedigreeEditor.attributes.radius * 2, &quot;(&quot; + text.slice(0, 14) +&quot;)&quot; );
            this._childlessStatusLabel.attr({&#x27;font-size&#x27;: 18, &#x27;font-family&#x27;: &#x27;Cambria&#x27;});
        }
        else {
            this._childlessStatusLabel = null;
        }
        this._childlessStatusLabel &amp;&amp; this._childlessStatusLabel.insertAfter(this.getChildlessShape().flatten());
        this.getNode().getType() == &quot;Person&quot; &amp;&amp; this.drawLabels();
    },

    &#x2F;**
     * Returns the Raphaël element for this Person&#x27;s childless status reason label
     *
     * @method getChildlessStatusLabel
     * @return {Raphael.el}
     *&#x2F;
    getChildlessStatusLabel: function() {
        return this._childlessStatusLabel;
    }
};
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
