<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>pedigree&#x2F;pedigree.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/AbstractHoverbox.html">AbstractHoverbox</a></li>
            
                <li><a href="..&#x2F;classes/AbstractNode.html">AbstractNode</a></li>
            
                <li><a href="..&#x2F;classes/AbstractNodeVisuals.html">AbstractNodeVisuals</a></li>
            
                <li><a href="..&#x2F;classes/AbstractPerson.html">AbstractPerson</a></li>
            
                <li><a href="..&#x2F;classes/AbstractPersonVisuals.html">AbstractPersonVisuals</a></li>
            
                <li><a href="..&#x2F;classes/ActionStack.html">ActionStack</a></li>
            
                <li><a href="..&#x2F;classes/ClassName.html">ClassName</a></li>
            
                <li><a href="..&#x2F;classes/Graph.html">Graph</a></li>
            
                <li><a href="..&#x2F;classes/GroupHoverbox.html">GroupHoverbox</a></li>
            
                <li><a href="..&#x2F;classes/Legend.html">Legend</a></li>
            
                <li><a href="..&#x2F;classes/NodeMenu.html">NodeMenu</a></li>
            
                <li><a href="..&#x2F;classes/NodetypeSelectionBubble.html">NodetypeSelectionBubble</a></li>
            
                <li><a href="..&#x2F;classes/Partnership.html">Partnership</a></li>
            
                <li><a href="..&#x2F;classes/PartnershipHoverbox.html">PartnershipHoverbox</a></li>
            
                <li><a href="..&#x2F;classes/PartnershipVisuals.html">PartnershipVisuals</a></li>
            
                <li><a href="..&#x2F;classes/PedigreeEditor.html">PedigreeEditor</a></li>
            
                <li><a href="..&#x2F;classes/Person.html">Person</a></li>
            
                <li><a href="..&#x2F;classes/PersonGroup.html">PersonGroup</a></li>
            
                <li><a href="..&#x2F;classes/PersonGroupVisuals.html">PersonGroupVisuals</a></li>
            
                <li><a href="..&#x2F;classes/PersonHoverbox.html">PersonHoverbox</a></li>
            
                <li><a href="..&#x2F;classes/PersonVisuals.html">PersonVisuals</a></li>
            
                <li><a href="..&#x2F;classes/PlaceHolder.html">PlaceHolder</a></li>
            
                <li><a href="..&#x2F;classes/PlaceHolderVisuals.html">PlaceHolderVisuals</a></li>
            
                <li><a href="..&#x2F;classes/Pregnancy.html">Pregnancy</a></li>
            
                <li><a href="..&#x2F;classes/PregnancyVisuals.html">PregnancyVisuals</a></li>
            
                <li><a href="..&#x2F;classes/SaveLoadEngine.html">SaveLoadEngine</a></li>
            
                <li><a href="..&#x2F;classes/SaveLoadIndicator.html">SaveLoadIndicator</a></li>
            
                <li><a href="..&#x2F;classes/Workspace.html">Workspace</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: pedigree&#x2F;pedigree.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">

&#x2F;**
 * The main class of the Pedigree Editor, responsible for initializing all the basic elements of the app.
 * Contains wrapper methods for the most commonly used functions.
 * This class should be initialized only once.
 *
 * @class PedigreeEditor
 * @constructor
 *&#x2F;
var PedigreeEditor = Class.create({
    initialize: function() {
        this.DEBUG_MODE = false;
        window.editor = this;

        &#x2F;&#x2F;initialize the elements of the app
        this._workspace = new Workspace();
        this._nodeMenu = this.generateNodeMenu();
        this._partnershipMenu = this.generatePartnershipMenu();
        this._nodetypeSelectionBubble = new NodetypeSelectionBubble();
        this._legend = new Legend();
        this._nodeIndex = new NodeIndex();
        this._graph = new Graph();
        this._actionStack = new ActionStack();
        this._saveLoadEngine = new SaveLoadEngine();
        this._saveLoadIndicator = new SaveLoadIndicator();
        this._templateSelector = new TemplateSelector();
        this._saveLoadEngine.load();

        &#x2F;&#x2F;attach actions to buttons on the top bar
        var undoButton = $(&#x27;action-undo&#x27;);
        undoButton &amp;&amp; undoButton.on(&quot;click&quot;, function(event) {
            editor.getActionStack().undo();
        });
        var redoButton = $(&#x27;action-redo&#x27;);
        redoButton &amp;&amp; redoButton.on(&quot;click&quot;, function(event) {
            editor.getActionStack().redo();
        });

        var saveButton = $(&#x27;action-save&#x27;);
        saveButton &amp;&amp; saveButton.on(&quot;click&quot;, function(event) {
            editor.getSaveLoadEngine().serialize();
        });

        var loadButton = $(&#x27;action-load&#x27;);
        loadButton &amp;&amp; loadButton.on(&quot;click&quot;, function(event) {
            editor.getSaveLoadEngine().load();
        });

        var templatesButton = $(&#x27;action-templates&#x27;);
        templatesButton &amp;&amp; templatesButton.on(&quot;click&quot;, function(event) {
            editor.getTemplateSelector().show();
        });
    },

    &#x2F;**
     * Returns the graph node with the corresponding nodeID
     * @method getNode
     * @param {Number} nodeID The id of the desired node
     * @return {AbstractNode} the node whose id is nodeID
     *&#x2F;
    getNode: function(nodeID) {
        return editor.getGraph().getNodeMap()[nodeID];
    },

    &#x2F;**
     * @method getGraph
     * @return {Graph} (responsible for managing nodes in the editor)
     *&#x2F;
    getGraph: function() {
        return this._graph;
    },

    &#x2F;**
     * @method getActionStack
     * @return {ActionStack} (responsible undoing and redoing actions)
     *&#x2F;
    getActionStack: function() {
        return this._actionStack;
    },

    &#x2F;**
     * @method getNodetypeSelectionBubble
     * @return {NodetypeSelectionBubble} (floating window with initialization options for new nodes)
     *&#x2F;
    getNodetypeSelectionBubble: function() {
        return this._nodetypeSelectionBubble;
    },

    &#x2F;**
     * @method getNodeIndex
     * @return {NodeIndex} (indexes nodes and arranges the layout)
     *&#x2F;
    getNodeIndex: function() {
        return this._nodeIndex;
    },

    &#x2F;**
     * @method getWorkspace
     * @return {Workspace}
     *&#x2F;
    getWorkspace: function() {
        return this._workspace;
    },

    &#x2F;**
     * @method getLegend
     * @return {Legend} Responsible for managing and displaying the disorder legend
     *&#x2F;
    getLegend: function() {
        return this._legend;
    },

    &#x2F;**
     * @method getPaper
     * @return {Workspace.paper} Raphael paper element
     *&#x2F;
    getPaper: function() {
        return this.getWorkspace().getPaper();
    },

    &#x2F;**
     * @method getSaveLoadEngine
     * @return {SaveLoadEngine} Engine responsible for saving and loading operations
     *&#x2F;
    getSaveLoadEngine: function() {
        return this._saveLoadEngine;
    },

    &#x2F;**
     * @method getTemplateSelector
     * @return {TemplateSelector}
     *&#x2F;
    getTemplateSelector: function() {
        return this._templateSelector
    },

    &#x2F;**
     * Creates the context menu for Person nodes
     *
     * @method generateNodeMenu
     * @return {NodeMenu}
     *&#x2F;
    generateNodeMenu: function() {
        var _this = this;
        document.observe(&#x27;mousedown&#x27;, function(event) {
            if (_this.getNodeMenu() &amp;&amp; _this.getNodeMenu().isActive()) {
                if (event.element().getAttribute(&#x27;class&#x27;) != &#x27;menu-trigger&#x27; &amp;&amp;
                    (!event.element().up || !event.element().up(&#x27;.menu-box, .calendar_date_select, .suggestItems&#x27;) &amp;&amp; event.element().up(&#x27;body&#x27;))) {
                    _this.getNodeMenu().hide();
                }
            }
        });
        return new NodeMenu([
            {
                &#x27;name&#x27; : &#x27;identifier&#x27;,
                &#x27;label&#x27; : &#x27;&#x27;,
                &#x27;type&#x27;  : &#x27;hidden&#x27;
            },
            {
                &#x27;name&#x27; : &#x27;gender&#x27;,
                &#x27;label&#x27; : &#x27;Gender&#x27;,
                &#x27;type&#x27; : &#x27;radio&#x27;,
                &#x27;values&#x27; : [
                    { &#x27;actual&#x27; : &#x27;M&#x27;, &#x27;displayed&#x27; : &#x27;Male&#x27; },
                    { &#x27;actual&#x27; : &#x27;F&#x27;, &#x27;displayed&#x27; : &#x27;Female&#x27; },
                    { &#x27;actual&#x27; : &#x27;U&#x27;, &#x27;displayed&#x27; : &#x27;Unknown&#x27; }
                ],
                &#x27;default&#x27; : &#x27;U&#x27;,
                &#x27;function&#x27; : &#x27;setGenderAction&#x27;
            },
            {
                &#x27;name&#x27; : &#x27;first_name&#x27;,
                &#x27;label&#x27;: &#x27;First name&#x27;,
                &#x27;type&#x27; : &#x27;text&#x27;,
                &#x27;function&#x27; : &#x27;setFirstNameAction&#x27;
            },
            {
                &#x27;name&#x27; : &#x27;last_name&#x27;,
                &#x27;label&#x27;: &#x27;Last name&#x27;,
                &#x27;type&#x27; : &#x27;text&#x27;,
                &#x27;function&#x27; : &#x27;setLastNameAction&#x27;
            },
            {
                &#x27;name&#x27; : &#x27;date_of_birth&#x27;,
                &#x27;label&#x27; : &#x27;Date of birth&#x27;,
                &#x27;type&#x27; : &#x27;date-picker&#x27;,
                &#x27;format&#x27; : &#x27;dd&#x2F;MM&#x2F;yyyy&#x27;,
                &#x27;function&#x27; : &#x27;setBirthDateAction&#x27;
            },
            {
                &#x27;name&#x27; : &#x27;date_of_death&#x27;,
                &#x27;label&#x27; : &#x27;Date of death&#x27;,
                &#x27;type&#x27; : &#x27;date-picker&#x27;,
                &#x27;format&#x27; : &#x27;dd&#x2F;MM&#x2F;yyyy&#x27;,
                &#x27;function&#x27; : &#x27;setDeathDateAction&#x27;
            },
            {
                &#x27;name&#x27; : &#x27;disorders&#x27;,
                &#x27;label&#x27; : &#x27;Known disorders of this individual&#x27;,
                &#x27;type&#x27; : &#x27;disease-picker&#x27;,
                &#x27;function&#x27; : &#x27;setDisordersAction&#x27;
            },
            {
                &#x27;name&#x27; : &#x27;gestation_age&#x27;,
                &#x27;label&#x27; : &#x27;Gestation age&#x27;,
                &#x27;type&#x27; : &#x27;select&#x27;,
                &#x27;range&#x27; : {&#x27;start&#x27;: 0, &#x27;end&#x27;: 50, &#x27;item&#x27; : [&#x27;week&#x27;, &#x27;weeks&#x27;]},
                &#x27;nullValue&#x27; : true,
                &#x27;function&#x27; : &#x27;setGestationAgeAction&#x27;
            },
            {
                &#x27;name&#x27; : &#x27;state&#x27;,
                &#x27;label&#x27; : &#x27;Individual is&#x27;,
                &#x27;type&#x27; : &#x27;radio&#x27;,
                &#x27;values&#x27; : [
                    { &#x27;actual&#x27; : &#x27;alive&#x27;, &#x27;displayed&#x27; : &#x27;Alive&#x27; },
                    { &#x27;actual&#x27; : &#x27;deceased&#x27;, &#x27;displayed&#x27; : &#x27;Deceased&#x27; },
                    { &#x27;actual&#x27; : &#x27;stillborn&#x27;, &#x27;displayed&#x27; : &#x27;Stillborn&#x27; },
                    { &#x27;actual&#x27; : &#x27;aborted&#x27;, &#x27;displayed&#x27; : &#x27;Aborted&#x27; },
                    { &#x27;actual&#x27; : &#x27;unborn&#x27;, &#x27;displayed&#x27; : &#x27;Unborn&#x27; }
                ],
                &#x27;default&#x27; : &#x27;alive&#x27;,
                &#x27;function&#x27; : &#x27;setLifeStatusAction&#x27;
            },
            {
                &#x27;label&#x27; : &#x27;Heredity options&#x27;,
                &#x27;name&#x27; : &#x27;childlessSelect&#x27;,
                &#x27;values&#x27; : [{&#x27;actual&#x27;: &#x27;none&#x27;, displayed: &#x27;None&#x27;},{&#x27;actual&#x27;: &#x27;childless&#x27;, displayed: &#x27;Childless&#x27;},{&#x27;actual&#x27;: &#x27;infertile&#x27;, displayed: &#x27;Infertile&#x27;}],
                &#x27;type&#x27; : &#x27;select&#x27;,
                &#x27;function&#x27; : &#x27;setChildlessStatusAction&#x27;
            },
            {
                &#x27;name&#x27; : &#x27;childlessText&#x27;,
                &#x27;type&#x27; : &#x27;text&#x27;,
                &#x27;dependency&#x27; : &#x27;childlessSelect != none&#x27;,
                &#x27;tip&#x27; : &#x27;Reason&#x27;,
                &#x27;function&#x27; : &#x27;setChildlessReasonAction&#x27;
            },
            {
                &#x27;name&#x27; : &#x27;adopted&#x27;,
                &#x27;label&#x27; : &#x27;Adopted&#x27;,
                &#x27;type&#x27; : &#x27;checkbox&#x27;,
                &#x27;function&#x27; : &#x27;setAdoptedAction&#x27;
            }
        ]);
    },

    &#x2F;**
     * @method getNodeMenu
     * @return {NodeMenu} Context menu for nodes
     *&#x2F;
    getNodeMenu: function() {
        return this._nodeMenu;
    },

    &#x2F;**
     * Creates the context menu for Partnership nodes
     *
     * @method generatePartnershipMenu
     * @return {NodeMenu}
     *&#x2F;
    generatePartnershipMenu: function() {
        var _this = this;
        document.observe(&#x27;mousedown&#x27;, function(event) {
            if (_this.getPartnershipMenu() &amp;&amp; _this.getPartnershipMenu().isActive()) {
                if (event.element().getAttribute(&#x27;class&#x27;) != &#x27;menu-trigger&#x27; &amp;&amp;
                    (!event.element().up || !event.element().up(&#x27;.menu-box, .calendar_date_select, .suggestItems&#x27;) &amp;&amp; event.element().up(&#x27;body&#x27;))) {
                    _this.getPartnershipMenu().hide();
                }
            }
        });
        return new NodeMenu([
            {
                &#x27;label&#x27; : &#x27;Heredity options&#x27;,
                &#x27;name&#x27; : &#x27;childlessSelect&#x27;,
                &#x27;values&#x27; : [{&#x27;actual&#x27;: &#x27;none&#x27;, displayed: &#x27;None&#x27;},{&#x27;actual&#x27;: &#x27;childless&#x27;, displayed: &#x27;Childless&#x27;},{&#x27;actual&#x27;: &#x27;infertile&#x27;, displayed: &#x27;Infertile&#x27;}],
                &#x27;type&#x27; : &#x27;select&#x27;,
                &#x27;function&#x27; : &#x27;setChildlessStatusAction&#x27;
            },
            {
                &#x27;name&#x27; : &#x27;childlessText&#x27;,
                &#x27;type&#x27; : &#x27;text&#x27;,
                &#x27;dependency&#x27; : &#x27;childlessSelect != none&#x27;,
                &#x27;tip&#x27; : &#x27;Reason&#x27;,
                &#x27;function&#x27; : &#x27;setChildlessReasonAction&#x27;
            }
        ]);
    },

    &#x2F;**
     * @method getPartnershipMenu
     * @return {NodeMenu} The context menu for Partnership nodes
     *&#x2F;
    getPartnershipMenu: function() {
        return this._partnershipMenu;
    },

    &#x2F;**
     * Starts a timer to save the application state every 30 seconds
     *
     * @method initializeSave
     *&#x2F;
    initializeSave: function() {
        setInterval(function(){editor.getGraph().serialize()},30000);
    },

    &#x2F;**
     * Find the best position to insert one or more new neighbors for an existing node
     *
     * @method findPosition
     * @param relativePosition an object with one field, which can be either &#x27;above&#x27;, &#x27;below&#x27;, &#x27;side&#x27;, or &#x27;join&#x27;, whose value indicated the id of a node
     * @param identifiers an array of new ids for which positions must be found
     *
     * @return an object where each field is one of the ids given as input, and the value is the point where that node should be placed
     *&#x2F;
    findPosition : function (relativePosition, identifiers) {
      return this.getNodeIndex().findPosition(relativePosition, identifiers);
    }
});

var editor;

&#x2F;&#x2F;attributes for graphical elements in the editor
PedigreeEditor.attributes = {
    radius: 40,
    unbornShape: {&#x27;font-size&#x27;: 50, &#x27;font-family&#x27;: &#x27;Cambria&#x27;},
    nodeShape: {fill: &quot;0-#ffffff:0-#B8B8B8:100&quot;, stroke: &quot;#595959&quot;},
    boxOnHover : {fill: &quot;gray&quot;, stroke: &quot;none&quot;,opacity: 1, &quot;fill-opacity&quot;:.25},
    menuBtnIcon : {fill: &quot;#1F1F1F&quot;, stroke: &quot;none&quot;},
    deleteBtnIcon : {fill: &quot;#990000&quot;, stroke: &quot;none&quot;},
    btnMaskHoverOn : {opacity:.6, stroke: &#x27;none&#x27;},
    btnMaskHoverOff : {opacity:0},
    btnMaskClick: {opacity:1},
    orbHue : .53,
        phShape: {fill: &quot;white&quot;,&quot;fill-opacity&quot;: 0, &quot;stroke&quot;: &#x27;black&#x27;, &quot;stroke-dasharray&quot;: &quot;- &quot;},
    dragMeLabel: {&#x27;font-size&#x27;: 14, &#x27;font-family&#x27;: &#x27;Tahoma&#x27;},
    descendantGroupLabel: {&#x27;font-size&#x27;: 20, &#x27;font-family&#x27;: &#x27;Tahoma&#x27;},
    label: {&#x27;font-size&#x27;: 18, &#x27;font-family&#x27;: &#x27;Cambria&#x27;},
    disorderShapes: {},
    partnershipRadius: 6,
        partnershipLines : {&quot;stroke-width&quot;: 2, stroke : &#x27;#2E2E56&#x27;}
};

document.observe(&quot;dom:loaded&quot;,function() {
    editor = new PedigreeEditor();
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
