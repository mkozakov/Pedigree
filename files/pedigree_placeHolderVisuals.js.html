<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>pedigree&#x2F;placeHolderVisuals.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/AbstractHoverbox.html">AbstractHoverbox</a></li>
            
                <li><a href="..&#x2F;classes/AbstractNode.html">AbstractNode</a></li>
            
                <li><a href="..&#x2F;classes/AbstractNodeVisuals.html">AbstractNodeVisuals</a></li>
            
                <li><a href="..&#x2F;classes/AbstractPerson.html">AbstractPerson</a></li>
            
                <li><a href="..&#x2F;classes/AbstractPersonVisuals.html">AbstractPersonVisuals</a></li>
            
                <li><a href="..&#x2F;classes/ActionStack.html">ActionStack</a></li>
            
                <li><a href="..&#x2F;classes/ClassName.html">ClassName</a></li>
            
                <li><a href="..&#x2F;classes/Graph.html">Graph</a></li>
            
                <li><a href="..&#x2F;classes/GroupHoverbox.html">GroupHoverbox</a></li>
            
                <li><a href="..&#x2F;classes/Legend.html">Legend</a></li>
            
                <li><a href="..&#x2F;classes/NodeMenu.html">NodeMenu</a></li>
            
                <li><a href="..&#x2F;classes/NodetypeSelectionBubble.html">NodetypeSelectionBubble</a></li>
            
                <li><a href="..&#x2F;classes/Partnership.html">Partnership</a></li>
            
                <li><a href="..&#x2F;classes/PartnershipHoverbox.html">PartnershipHoverbox</a></li>
            
                <li><a href="..&#x2F;classes/PartnershipVisuals.html">PartnershipVisuals</a></li>
            
                <li><a href="..&#x2F;classes/PedigreeEditor.html">PedigreeEditor</a></li>
            
                <li><a href="..&#x2F;classes/Person.html">Person</a></li>
            
                <li><a href="..&#x2F;classes/PersonGroup.html">PersonGroup</a></li>
            
                <li><a href="..&#x2F;classes/PersonGroupVisuals.html">PersonGroupVisuals</a></li>
            
                <li><a href="..&#x2F;classes/PersonHoverbox.html">PersonHoverbox</a></li>
            
                <li><a href="..&#x2F;classes/PersonVisuals.html">PersonVisuals</a></li>
            
                <li><a href="..&#x2F;classes/PlaceHolder.html">PlaceHolder</a></li>
            
                <li><a href="..&#x2F;classes/PlaceHolderVisuals.html">PlaceHolderVisuals</a></li>
            
                <li><a href="..&#x2F;classes/Pregnancy.html">Pregnancy</a></li>
            
                <li><a href="..&#x2F;classes/PregnancyVisuals.html">PregnancyVisuals</a></li>
            
                <li><a href="..&#x2F;classes/SaveLoadEngine.html">SaveLoadEngine</a></li>
            
                <li><a href="..&#x2F;classes/SaveLoadIndicator.html">SaveLoadIndicator</a></li>
            
                <li><a href="..&#x2F;classes/Workspace.html">Workspace</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: pedigree&#x2F;placeHolderVisuals.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * Class for organizing graphics for PlaceHolder nodes.
 *
 * @class PlaceHolderVisuals
 * @extends AbstractPersonVisuals
 * @constructor
 * @param {PlaceHolder} node The node for which the graphics are handled
 * @param {Number} x The x coordinate on the canvas
 * @param {Number} y The y coordinate on the canvas
 *&#x2F;

var PlaceHolderVisuals = Class.create(AbstractPersonVisuals, {

    initialize: function($super, node, x, y) {
        $super(node, x, y);
        &#x2F;&#x2F;this.setDraggable();
    },

    &#x2F;**
     * Sets&#x2F;replaces the gender symbol with the symbol appropriate for the gender. Returns raphael set containing
     * the genderShape, a shadow behind it, and the text &quot;drag me or click me&quot;.
     *
     * @method setGenderSymbol
     *&#x2F;
    setGenderSymbol: function($super) {
        $super();
        var shape = this.getGenderSymbol().attr(PedigreeEditor.attributes.phShape);
        var text = editor.getPaper().text(this.getX(), this.getY() - PedigreeEditor.attributes.radius&#x2F;20, editor.DEBUG_MODE ? &quot;&quot; : &quot;CLICK ME \nOR \nDRAG ME&quot;);
        text.attr(PedigreeEditor.attributes.dragMeLabel);
        shape.push(text);
        shape.attr(&quot;cursor&quot;, &quot;pointer&quot;);
        shape.ox = shape.getBBox().x;
        shape.oy = shape.getBBox().y;
        var layerBelow = (this._highlightBox) ? this._highlightBox : editor.getGraph().getProband().getGraphics().getAllGraphics().flatten()
        shape.flatten().insertAfter(layerBelow);
        this._icon = this._genderSymbol = shape;
        this.setDraggable();
    },

    &#x2F;**
     * Handles the dragging and clicking behavior of the placeholder
     *
     * @method setDraggable
     *&#x2F;
    setDraggable: function() {
        var me = this,
            isDragged,
            draggable = true,
            ox = 0,
            oy = 0,
            absOx,
            absOy;

        &#x2F;&#x2F;Action on mouse click
        var start = function() {
            if(!me.isAnimating) {
                absOx = me.getX();
                absOy = me.getY();
                isDragged = false;
                me.getShapes().toFront();
                editor.getGraph().setCurrentDraggable(me.getNode());
                editor.getGraph().enterHoverMode(me.getNode(), [&quot;Person&quot;]);
            }
        };

        &#x2F;&#x2F;Called when the placeholder is dragged
        var move = function(dx, dy) {
            dx = dx&#x2F;editor.getWorkspace().zoomCoefficient;
            dy = dy&#x2F;editor.getWorkspace().zoomCoefficient;
            if(!me.isAnimating) {
                me.setPos(absOx + dx, absOy + dy);
                ox = dx;
                oy = dy;
                if(dx &gt; 2 || dx &lt; -2 || dy &gt; 2 || dy &lt; -2 ) {
                    isDragged = true;
                }
            }
        };

        &#x2F;&#x2F;Called when the mouse button is released
        var end = function() {
            if(!me.isAnimating){
                if(isDragged) {
                    draggable = false;
                    var node = me.getNode().validHoveredNode;
                    me.getNode().validHoveredNode = null;
                    if(node) {
                        me.getNode().mergeAction(node, absOx, absOy);
                    }
                    else {
                        me.isAnimating = true;
                        me.setPos(absOx, absOy, true, function() {
                            me.isAnimating = false;
                        });
                        ox = 0;
                        oy = 0;
                    }
                }
                else {
                    me.setPos(absOx, absOy, false);
                    if(me.getNode().getGender() == &quot;U&quot;) {
                        var x = me.getX(),
                            y = me.getY() + PedigreeEditor.attributes.radius,
                            position = editor.getWorkspace().canvasToDiv(x, y);
                        editor.getNodetypeSelectionBubble().show(me.getNode(), position.x, position.y);
                    }
                    else {
                        me.getNode().createNodeAction(&quot;Person&quot;, me.getNode().getGender());
                    }
                }
                editor.getGraph().exitHoverMode();
                editor.getGraph().setCurrentDraggable(null);
            }
        };
        &#x2F;&#x2F;Adds dragging capability to the genderSymbols
        me.getGenderSymbol().drag(move, start, end);
    }
});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
